<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j" xmlns:b="http://bootsfaces.net/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
</h:head>
<h:body>

	<h:form id="form">
		<table>
			<ui:repeat value="#{bookSeat.seats}" var="seatList"
				varStatus="status">
				<tr>
					<ui:repeat value="#{seatList}" var="seat">
						<td><b:commandButton
								value="(#{seat.seatRow},#{seat.seatColumn})"
								style="background-color: #{seat.occupied ? bookSeat.selectedSeats.contains(seat) ? 'orange' : 'red' : 'green'};"
								immediate="true"
								onclick="ajax:bookSeat.occupy(seat.seatRow, seat.seatColumn);javascript:send();"
								ajax="true" update="@form" /></td>
					</ui:repeat>
				</tr>
			</ui:repeat>
		</table>
		<b:commandButton id="upbutton"
						value="Update"
						immediate="true"
						onclick="ajax:bookSeat.update()"
						ajax="true"
						style="display: none;"
						update="@form"
			 			/>
		<b:commandButton id="downbutton"
						value="Delete"
						immediate="true"
						onclick="ajax:bookSeat.delete();"
						ajax="true"
						
						update="@form"
			 			/>
		<b:commandButton id="accept"
						value="Véglegesít"
						action="#{bookSeat.save}"
			 			/>
	</h:form>

	<!-- Script to utilise the WebSocket -->
	<h:outputScript library="js" name="socket.js" target="body" />
	<h:outputStylesheet library="css" name="reservation.css" />

</h:body>
</html>